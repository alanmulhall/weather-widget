{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 302d784ddc3ca3b2d8b1","webpack:///./widget/weather-widget.js"],"names":["APP_ID","WeatherWidget","settings","Object","keys","forEach","setting","_getWeather","then","_render","bind","catch","console","log","e","icon","code","prefix","today","Date","hour","getHours","dayornight","speed","units","showWind","title","name","main","weather","wind","temp","description","id","_styleSheet","_windTemplate","_buildIcon","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","lat","position","coords","latitude","lon","longitude","error","enableHighAccuracy","maximumAge","url","fetch","response","json","_getUsersGeoLocation","_buildWeatherUrl","_fetchWeather","data","_template"],"mappings":"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","file":"./public/javascripts/dist/weather-widget.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"WeatherWidget\"] = factory();\n\telse\n\t\troot[\"WeatherWidget\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 302d784ddc3ca3b2d8b1","const\tAPP_ID = '76dc88ee534303a679d5db850ed3f137';\n\nclass WeatherWidget {\n\n\tconstructor(settings) {\n\t\tObject.keys(settings).forEach(setting => {\n\t\t\tthis[setting] = settings[setting];\n\t\t});\n\t\treturn this._getWeather()\n\t\t\t\t\t\t.then(this._render.bind(this))\n\t\t\t\t\t\t.catch(e => console.log(e));\n\t}\n\n\t_styleSheet() {\n\t\treturn `\n\t\t\tp {\n\t\t\t\tcolor: red;\n\t\t\t}\n\t\t`;\n\t}\n\n\t_buildIcon(icon, code) {\n\t\tconst prefix = 'wi wi-';\n\t\tconst today = new Date();\n\t\tconst hour = today.getHours();\n\t\tlet dayornight;\n\t\tif (hour > 6 && hour < 20) {\n\t\t\t dayornight = 'day-';\n\t\t} else {\n\t\t\t dayornight = 'night-';\n\t\t}\n   return `${prefix}owm-${dayornight}${code}`;\n\t}\n\n\t_windTemplate({speed}) {\n\t\tconst units = this.units === 'metric' ? 'meter/sec' : 'miles/hour';\n\t\tif (this.showWind) {\n\t\t\treturn `\n\t\t\t\t<p>wind: ${speed} ${units}</p>\n\t\t\t`;\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\t_template({title, name, main, weather, wind}) {\n\t\tconst {temp} = main;\n\t\tconst {description, icon, id} = weather[0];\n\t\treturn `\n\t\t\t<style>\n\t\t\t\t@import url(\"/stylesheets/weather-icons.css\");\n\t\t\t\t${this._styleSheet()}\n\t\t\t</style>\n\t\t\t<p class=\"title\">\n\t\t\t\ttitle: ${this.title}\n\t\t\t</p>\n\t\t\t<p class=\"location\">\n\t\t\t\tLocation: ${name}\n\t\t\t</p>\n\t\t\t<p class=\"tempature\">\n\t\t\t\tTemp: ${temp}\n\t\t\t</p>\n\t\t\t<p class=\"description\">\n\t\t\t\tDescription: ${description}\n\t\t\t</p>\n\t\t\t${this._windTemplate(wind)}\n\t\t\t<i class=\"${this._buildIcon(icon, id)}\"></i>\n\t\t`;\n\t}\n\n\t_getUsersGeoLocation() {\n\t\treturn new Promise((resolve, reject) => {\n      navigator.geolocation.getCurrentPosition(\n        position => {\n          return resolve({lat: position.coords.latitude, lon: position.coords.longitude});\n        },\n        error => reject(error),\n        {\n          enableHighAccuracy: false,\n          maximumAge: 1000 * 60 * 60\n        }\n      );\n\t\t});\n\t}\n\n\t_buildWeatherUrl({lat, lon}) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (!lat || !lon) {\n\t\t\t\treturn reject('Unable to get geolocation.');\n\t\t\t}\n\t\t\treturn resolve(`http://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&units=${this.units}&appid=${APP_ID}`);\n\t\t});\n\t}\n\n\t_fetchWeather(url) {\n\t\treturn fetch(url).then(response => response.json());\n\t}\n\n\t_getWeather() {\n\t\treturn this._getUsersGeoLocation()\n\t\t\t\t\t\t.then(this._buildWeatherUrl.bind(this))\n\t\t\t\t\t\t.then(this._fetchWeather);\n\t}\n\n\t_render(data) {\n\t\treturn this._template(data);\n\t}\n\n};\n\nexport default WeatherWidget;\n\n\n\n// WEBPACK FOOTER //\n// ./widget/weather-widget.js"],"sourceRoot":""}